<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog | My Food Blog</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href='https://cdn.boxicons.com/3.0.3/fonts/basic/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
    }
   .navbar{
      padding: 0.6rem;
      background-color: rgb(46, 163, 163);
    }
    .navbar-nav .nav-link{
      border-radius: 12px;
      color: #ffcc00;
      font-size: 18px;
      font-weight: bold;
      box-sizing: 15px;
    }
    .navbar-brand{
      font-weight: bold;
      font-size: 30px;
      color: black;
      font-family: 'Times New Roman', Times, serif;
      
    }
    .hero{
        height: 50vh;
    }
    .hero h1{
        text-align: center;
        margin-top: 5rem;
        margin-bottom: 5rem;
        font-weight: bold;
        color: rgb(19, 97, 100);
        font-family: Georgia, 'Times New Roman', Times, serif;
        display: flex;
    }
    .hero p{
        font-size: 1.5rem;
        font-family: 'Times New Roman', Times, serif;
    }
    .blog-card img {
      height: 200px;
      object-fit: cover;
    }
    .category-badge {
      margin-right: 5px;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
   <nav class="navbar navbar-expand-lg">
    <div class="container">
      <img src="{{ url_for('static', filename='images/food logo.jpeg') }}" alt="Logo" width="40" height="40" class="me-2 rounded-circle">
      <a class="navbar-brand" href="#">Becca Foodies</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link mx-3" href="{{ url_for('home') }}"><i class='bx bx-home'></i> Home</a></li>
          <li class="nav-item"><a class="nav-link mx-3" href="{{ url_for('recipes') }}"><i class='bx bx-cookie'></i> Recipes</a></li>
          <li class="nav-item"><a class="nav-link active mx-3" href="{{ url_for('blog') }}"><i class='bx bx-article'></i> Blog</a></li>
          <li class="nav-item"><a class="nav-link mx-3" href="{{ url_for('about') }}"><i class='bx bx-info-octagon'></i> About</a></li>
          <li class="nav-item"><a class="nav-link mx-3" href="{{ url_for('saved_recipes') }}"><i class='bx bx-cookie'></i>Saved Recipes</a></li>

          

        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
 <section class="hero">
    <div class="container">
      <h1>Discover flavours of Kenya, Africa and beyond</h1>
      <p>
        Welcome to <b>Becca Foodies</b>, where every recipe tells a story. From the smoky taste of nyama choma to the comforting warmth of githeri and the aromatic spices of coastal pilau, we celebrate the heart of Kenyan cuisine while embracing global flavors.
      </p>
      <p>
        Here, youâ€™ll find <b>authentic recipes, healthy food ideas, and cooking tips </b> to make mealtime fun, simple, and unforgettable.
      </p>
    </div>
  </section>

  <!-- Search & Categories -->
  <section class="container my-5">
    <div class="row mb-4">
      <div class="col-md-8">
        <form class="d-flex">
          <input type="text" id="searchInput" class="form-control me-2" placeholder="Search blogs by keyword or topic...">
          <button class="btn btn-warning">Search</button>
        </form>
      </div>
      <div class="col-md-4 text-md-end mt-3 mt-md-0">
        <div>
          <span class="badge bg-primary category-badge">Food Culture</span>
          <span class="badge bg-success category-badge">Lifestyle</span>
          <span class="badge bg-danger category-badge">Trending</span>
          <span class="badge bg-success category-badge">Seasonal</span>
          <span class="badge bg-primary category-badge">Weight Loss</span>
          <span class="badge bg-danger category-badge">Weight Gain</span>
        </div>
      </div>
    </div>

    <!-- Blog Posts Grid -->
    <div class="row g-4">
      {% for blog in blogs %}
      <div class="col-md-4">
        <div class="card blog-card">
          {% if blog.image %}
            <img src="{{ url_for('static', filename='images/' ~ blog.image) }}" class="card-img-top" alt="{{ blog.title }}">
          {% else %}
            <img src="{{ url_for('static', filename='images/default_blog.jpg') }}" class="card-img-top" alt="Default Blog">
          {% endif %}
          <div class="card-body">
            <h5 class="card-title">{{ blog.title }}</h5>
            <p class="card-text">{{ blog.content[:120]|safe }}...</p>
            <span class="badge bg-primary">{{ blog.category or "General" }}</span>
            <a href="{{ url_for('single_post', post_id=blog.id) }}" class="btn btn-sm btn-warning mt-2">Read More</a>
          </div>
        </div>
      </div>
      {% else %}
      <p class="text-center">No blogs available yet. Check back soon!</p>
      {% endfor %}
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-dark text-white text-center py-3">
    <p>&copy; 2025 My Food Blog | All rights reserved.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
   <script>
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const searchResults = document.getElementById('searchResults');

    // Function to load search results dynamically
    function searchBlogs(query) {
      fetch(`/search?q=${encodeURIComponent(query)}`)
        .then(response => response.json())
        .then(data => {
          searchResults.innerHTML = "";
          if (data.length === 0) {
            searchResults.innerHTML = "<p>No blogs found matching your search.</p>";
            return;
          }

          data.forEach(blog => {
            const blogCard = document.createElement('div');
            blogCard.classList.add('blog-card');
            blogCard.innerHTML = `
              <img src="${blog.image || '/static/default.jpg'}" alt="${blog.title}">
              <div class="blog-content">
                <h3><a href="/blog/${blog.id}">${blog.title}</a></h3>
                <p>${blog.snippet}</p>
              </div>
            `;
            searchResults.appendChild(blogCard);
          });
        })
        .catch(error => console.error("Error:", error));
    }

    // Event listeners
    searchBtn.addEventListener('click', () => {
      const query = searchInput.value.trim();
      if (query) searchBlogs(query);
    });

    // Enable instant search as user types
    searchInput.addEventListener('keyup', (event) => {
      const query = event.target.value.trim();
      if (query.length >= 2) searchBlogs(query);
      else searchResults.innerHTML = "";
    });
  </script>
</body>
</html>
